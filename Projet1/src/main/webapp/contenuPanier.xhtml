<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">


<h:head>
<title>.: Cart details :.</title>
<style>
.order-table{border-collapse:collapse;}
.order-table-header{text-align:center;background:none repeat scroll 0 0 #E5E5E5;border-bottom:1px solid #BBBBBB;padding:16px;}
.order-table-odd-row{text-align:center;background:none repeat scroll 0 0 #FFFFFFF;border-top:1px solid #BBBBBB;}
.order-table-even-row{text-align:center;background:none repeat scroll 0 0 #F9F9F9;border-top:1px solid #BBBBBB;}
</style>
</h:head>

<h:body>

<f:event listener="#{itemCartController.initCartDetail}" type="preRenderView" /> 



	<div>
		<h1>Détails de votre panier</h1>
	</div>
	<div>
		<h2>Panier Id <h:outputText value="#{itemCartController.cart.id}"/> - (Printing for debug purpose only)</h2>
		<h:form>
		<h:dataTable value="#{itemCartController.cartLines}"  var="line" styleClass="order-table"
    			headerClass="order-table-header"
    			rowClasses="order-table-odd-row,order-table-even-row">
			<h:column>
				<f:facet name="header">Nom des articles</f:facet>
				<h:outputText value="#{line.item.name}"/>
			</h:column>
			<h:column>
				<f:facet name="header">Prix unitaire</f:facet>
				<h:outputText value="#{line.unitPrice}"/>
			</h:column>
			<h:column>
				<f:facet name="header">Stock</f:facet>
				<h:outputText value="#{line.item.stock}"/>
			</h:column>
			<h:column>
				<f:facet name="header">Quantité</f:facet>
				<h:outputText value="#{line.quantity}"/>
			</h:column> 
			<h:column>
				<f:facet name="header">Prix Total</f:facet>
				<h:outputText value="#{itemCartController.cartLinesSubtotal[line.id]}"/>
			</h:column>
			<h:column>
				<f:facet name="header">Supprimer</f:facet>
				<h:commandLink action="#{itemCartController.removeItemFromCart}">
					<h:outputText value="X"/>
					<f:param name="itemIdToRemove" value="#{line.item.id}"/>
				</h:commandLink>	
			</h:column>
		</h:dataTable>

		<br/>
		<div class="zoneButton">
		Montant total: <h:outputText value="#{itemCartController.totalAmount}"/>€<br/><br/>
		<h:commandButton value="REtour liste items"  action="item-list?faces-redirect=true"/>
		<br/>
		
		<h:commandButton value="Valider la commande"  action="#"/>
		</div>
	</h:form>
	</div>
</h:body>
</html>