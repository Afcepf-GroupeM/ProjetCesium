<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pretty="http://ocpsoft.com/prettyfaces">  <!-- Important pour les balises prettylink -->

<h:head>
<title>.: Item list :.</title>


<style>
.order-table{border-collapse:collapse;}
.order-table-header{text-align:center;background:none repeat scroll 0 0 #E5E5E5;border-bottom:1px solid #BBBBBB;padding:16px;}
.order-table-odd-row{text-align:center;background:none repeat scroll 0 0 #FFFFFFF;border-top:1px solid #BBBBBB;}
.order-table-even-row{text-align:center;background:none repeat scroll 0 0 #F9F9F9;border-top:1px solid #BBBBBB;}
</style>

</h:head>

<h:body>
<f:event listener="#{itemListController.init}" type="preRenderView" />
<h:form>
<div style="float:left; margin: 0 auto">
	<h1>.: Liste d'items par categorie :.</h1>
	<div style="width: 100%">
		<ui:repeat var="metaCat" value="#{itemListController.listMetaCategory}">
			<div style="width: 150px;margin: 20px auto;padding: 5px;float: left">
					<h:outputText value="#{metaCat.id}"/> - <h:outputText value="#{metaCat.name}"/><br/>
					<ul style="margin: 0">
						<ui:repeat var="cat" value="#{metaCat.categories}">
							<li><pretty:link mappingId="item-list"><f:param value="#{cat.id}" /><h:outputText value="#{cat.name}"/></pretty:link></li>
						</ui:repeat>
					</ul>
			</div>
		</ui:repeat>
	</div>
	
		
	<div style="width: 100%;float: left;">
	<h2>- Articles pour la catégorie <h:outputText value="#{itemListController.chosenCategory.name}" /> -</h2>
		<h:dataTable var="it" value="#{itemListController.chosenCategory.items}" styleClass="order-table"
    			headerClass="order-table-header"
    			rowClasses="order-table-odd-row,order-table-even-row">
			<h:column>
				<f:facet name="header">Photo</f:facet>
				<img src="#{request.contextPath}#{itemListController.imagePath}#{it.id}/1.jpg" height="128" width="128"></img>
			</h:column>
			<h:column>
				<f:facet name="header">Nom</f:facet>
				<h:outputText value="#{it.name}"/>
			</h:column>
			<h:column>
				<f:facet name="header">Reference</f:facet>
				<h:outputText value="#{it.reference}"/>
			</h:column>
			<h:column>
				<f:facet name="header">Prix</f:facet>
				<h:outputText value="#{it.price}"/>€
			</h:column>
			<h:column>
				<f:facet name="header">Description</f:facet>
				<h:outputText value="#{it.description}"/>
			</h:column>
			<h:column>
				<f:facet name="header">Stock</f:facet>
				<h:outputText value="#{it.stock}"/>
			</h:column>
			<h:column>
				<f:facet name="header">Détails</f:facet>
				<h:commandLink action="#{detailArticleController.doFindItem}">
					<h:outputText value="Fiche"/>
					<f:param name = "itemId" value="#{it.id}"/>
				</h:commandLink>	
			</h:column>
		</h:dataTable>
	</div>
</div>
</h:form>
</h:body>


</html>
